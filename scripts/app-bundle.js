var __decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("app",["require","exports","aurelia-framework","aurelia-event-aggregator","./services/messages","./services/tweet-service"],function(e,t,i,r,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t,i){var r=this;this.au=e,this.ts=i,t.subscribe(o.LoginStatus,function(t){r.router.navigate("/",{replace:!0,trigger:!1}),r.router.reset(),!0===t.status?e.setRoot("home"):e.setRoot("app")})}return e.prototype.configureRouter=function(e,t){e.map([{route:["","login"],name:"login",moduleId:"components/login",nav:!0,title:"Login"},{route:"signup",name:"signup",moduleId:"components/signup",nav:!0,title:"Signup"}]),this.router=t},e.prototype.attached=function(){var e=this;this.ts.isAuthenticated()&&this.au.setRoot("home").then(function(){e.router.navigateToRoute("home")})},e=__decorate([i.inject(i.Aurelia,r.EventAggregator,n.TweetService),__metadata("design:paramtypes",[i.Aurelia,r.EventAggregator,n.TweetService])],e)}();t.App=a}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("home",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.configureRouter=function(e,t){e.map([{route:["","home"],name:"home",moduleId:"components/home",nav:!0,title:"Global Timeline"},{route:"followedtweets",name:"followedtweets",moduleId:"components/followedtweets",nav:!0,title:"Followed Timeline"},{route:"profile",name:"profile",moduleId:"components/profile",nav:!0,title:"My Profile"},{route:"userprofile/:id",name:"userprofile",moduleId:"components/userprofile",nav:!1,title:"Profile"},{route:"settings",name:"settings",moduleId:"components/settings",nav:!0,title:"Settings"},{route:"logout",name:"logout",moduleId:"components/logout",nav:!0,title:"Logout"}]),this.router=t},e}();t.Home=i}),define("main",["require","exports","./environment"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.configure=function(e){e.use.standardConfiguration().feature("resources"),i.default.debug&&e.use.developmentLogging(),i.default.testing&&e.use.plugin("aurelia-testing"),e.start().then(function(){return e.setRoot()})}});__decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/deletabletimeline",["require","exports","aurelia-framework","../services/tweet-service","aurelia-event-aggregator","../services/messages"],function(e,t,i,r,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var i=this;this.checkboxes=[],this.tweetService=e,t.subscribe(n.Tweets,function(e){i.tweets=e.tweets})}return e.prototype.deleteAll=function(){for(var e=0,t=this.tweets;e<t.length;e++){var i=t[e];this.tweetService.deleteTweet(i._id)}},e.prototype.deleteSelected=function(){for(var e=0,t=this.checkboxes;e<t.length;e++){var i=t[e];this.tweetService.deleteTweet(i)}},e=__decorate([i.inject(r.TweetService,o.EventAggregator),__metadata("design:paramtypes",[Object,Object])],e)}();t.Deletabletimeline=a});__decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/followedtweets",["require","exports","aurelia-framework","../services/tweet-service","aurelia-event-aggregator"],function(e,t,i,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){e.getFollowedTweets()}return e=__decorate([i.inject(r.TweetService,o.EventAggregator),__metadata("design:paramtypes",[Object,Object])],e)}();t.Followedtweets=n});__decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/home",["require","exports","aurelia-framework","../services/tweet-service"],function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.tweetService=e,e.getTweets()}return e.prototype.activate=function(){this.tweetService.getTweets()},e=__decorate([i.inject(r.TweetService),__metadata("design:paramtypes",[r.TweetService])],e)}();t.Home=o});__decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/login",["require","exports","aurelia-framework","../services/tweet-service"],function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.email="",this.password="",this.tweetService=e}return e.prototype.login=function(e){console.log("Trying to log in "+this.email),this.tweetService.login(this.email,this.password)},e=__decorate([i.inject(r.TweetService),__metadata("design:paramtypes",[r.TweetService])],e)}();t.Login=o});__decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/logout",["require","exports","../services/tweet-service","aurelia-framework"],function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.tweetService=e}return e.prototype.logout=function(){console.log("logging out"),this.tweetService.logout()},e=__decorate([r.inject(i.TweetService),__metadata("design:paramtypes",[i.TweetService])],e)}();t.Logout=o});__decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/profile",["require","exports","aurelia-framework","../services/tweet-service","aurelia-event-aggregator"],function(e,t,i,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.tweetService=e,this.eventAggregator=t,e.getCurrentUser(),this.tweetService.getUsersTweets(e.currentUser._id)}return e=__decorate([i.inject(r.TweetService,o.EventAggregator),__metadata("design:paramtypes",[r.TweetService,o.EventAggregator])],e)}();t.Profile=n});__decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/settings",["require","exports","aurelia-framework","../services/tweet-service","aurelia-event-aggregator","../services/messages"],function(e,t,i,r,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){this.firstName="",this.lastName="",this.email="",this.password="",this.tweetService=e,this.eventAggregator=t,e.getCurrentUser()}return e.prototype.attached=function(){var e=this;this.eventAggregator.subscribe(n.CurrentUser,function(t){e.currentUser=t.user,e.firstName=e.currentUser.firstName,e.lastName=e.currentUser.lastName,e.email=e.currentUser.email})},e.prototype.update=function(e){this.currentUser.firstName=this.firstName,this.currentUser.lastName=this.lastName,this.currentUser.email=this.email,this.currentUser.password=this.password,this.tweetService.update(this.currentUser)},e=__decorate([i.inject(r.TweetService,o.EventAggregator),__metadata("design:paramtypes",[Object,Object])],e)}();t.Settings=a});__decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/signup",["require","exports","aurelia-framework","../services/tweet-service"],function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.firstName="",this.lastName="",this.email="",this.password="",this.tweetService=e}return e.prototype.register=function(e){this.tweetService.register(this.firstName,this.lastName,this.email,this.password),this.tweetService.login(this.email,this.password)},e=__decorate([i.inject(r.TweetService),__metadata("design:paramtypes",[Object])],e)}();t.Signup=o});__decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/timeline",["require","exports","aurelia-framework","../services/tweet-service","aurelia-event-aggregator","../services/messages"],function(e,t,i,r,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var i=this;t.subscribe(n.Tweets,function(e){i.tweets=e.tweets})}return e=__decorate([i.inject(r.TweetService,o.EventAggregator),__metadata("design:paramtypes",[Object,Object])],e)}();t.Timeline=a});__decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/tweet",["require","exports","aurelia-framework","../services/tweet-service"],function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.tweet="",this.image=[],this.tweetService=e,this.tweet=this.tweet}return e.prototype.makeTweet=function(){var e=this,t=new FileReader;t.onload=function(){var i=t.result;e.tweetService.tweet(e.tweet,i)},this.image[0]?t.readAsDataURL(this.image[0]):this.tweetService.tweet(this.tweet,null)},e=__decorate([i.inject(r.TweetService),__metadata("design:paramtypes",[r.TweetService])],e)}();t.Tweet=o});__decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/userprofile",["require","exports","aurelia-framework","../services/tweet-service","aurelia-event-aggregator"],function(e,t,i,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.tweetService=e,this.eventAggregator=t}return e.prototype.activate=function(e){this.tweetService.getUsersTweets(e.id),this.tweetService.getUser(e.id)},e=__decorate([i.inject(r.TweetService,o.EventAggregator),__metadata("design:paramtypes",[r.TweetService,o.EventAggregator])],e)}();t.Userprofile=n});__decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/viewuser",["require","exports","jquery","aurelia-framework","../services/tweet-service","aurelia-event-aggregator","../services/messages"],function(e,t,i,r,o,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){this.isFollowing=!1,this.tweetService=e,this.eventAggregator=t,e.getCurrentUser()}return e.prototype.attached=function(){i(".ui .accordion").accordion({selector:{trigger:".title"}}),this.updateFollowing()},e.prototype.followToggle=function(){this.isFollowing?this.tweetService.unfollow(this.user):this.tweetService.follow(this.user),this.isFollowing=!this.isFollowing},e.prototype.updateFollowing=function(){var e=this;this.isFollowing=!1,this.eventAggregator.subscribe(a.ActiveUser,function(t){e.user=t.user,e.tweetService.getCurrentUser();for(var i=!1,r=0,o=e.user.followers;r<o.length;r++){o[r]._id===e.tweetService.currentUser._id&&(i=!0)}e.isFollowing=i})},e=__decorate([r.inject(o.TweetService,n.EventAggregator),__metadata("design:paramtypes",[Object,Object])],e)}();t.Viewuser=s});__decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("components/viewusers",["require","exports","aurelia-framework","../services/tweet-service"],function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){e.getUsers(),this.users=e.users}return e=__decorate([i.inject(r.TweetService),__metadata("design:paramtypes",[Object])],e)}();t.Viewusers=o}),define("resources/index",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.configure=function(e){}});__decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("services/async-http-client",["require","exports","aurelia-framework","aurelia-http-client","./fixtures","aurelia-event-aggregator","./messages"],function(e,t,i,r,o,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t,i){this.http=e,this.http.configure(function(e){e.withBaseUrl(t.baseUrl)}),this.ea=i}return e.prototype.isAuthenticated=function(){var e=!1;return"null"!==localStorage.tweeter&&(e=!0,this.http.configure(function(e){var t=JSON.parse(localStorage.tweeter);e.withHeader("Authorization","bearer "+t.token)})),e},e.prototype.authenticate=function(e,t){var i=this;this.http.post(e,t).then(function(e){e.content.success&&(localStorage.tweeter=JSON.stringify(e.content),i.http.configure(function(t){t.withHeader("Authorization","bearer "+e.content.token)})),i.ea.publish(new a.LoginStatus(!0))}).catch(function(e){i.ea.publish(new a.LoginStatus(!1,"service not available"))})},e.prototype.clearAuthentication=function(){localStorage.tweeter=null,this.http.configure(function(e){e.withHeader("Authorization","")})},e.prototype.get=function(e){return this.http.get(e)},e.prototype.put=function(e,t){return this.http.put(e,t)},e.prototype.post=function(e,t){return this.http.post(e,t)},e.prototype.delete=function(e){return this.http.delete(e)},e=__decorate([i.inject(r.HttpClient,o.default,n.EventAggregator),__metadata("design:paramtypes",[Object,Object,Object])],e)}();t.default=s}),define("services/fixtures",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(){this.baseUrl="http://54.246.244.111:4000"}}();t.default=i}),define("services/messages",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e){this.tweets=e}}();t.Tweets=i;var r=function(){return function(e){this.user=e}}();t.CurrentUser=r;var o=function(){return function(e){this.user=e}}();t.ActiveUser=o;var n=function(){return function(e,t){void 0===t&&(t=""),this.status=e,this.message=t}}();t.LoginStatus=n}),define("services/models",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})});__decorate=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,a=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("services/tweet-service",["require","exports","aurelia-framework","./async-http-client","./fixtures","./messages","aurelia-event-aggregator","moment"],function(e,t,i,r,o,n,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t,i){this.tweets=[],this.users=new Map,this.ea=t,this.ac=i}return e.prototype.isAuthenticated=function(){return this.ac.isAuthenticated()},e.prototype.getCurrentUser=function(){var e=this;this.ac.get("/api/users/current").then(function(t){e.currentUser=t.content,e.ac.get("/api/followers/"+e.currentUser._id).then(function(t){e.currentUser.followers=t.content}).then(function(t){e.ac.get("/api/following/"+e.currentUser._id).then(function(t){e.currentUser.following=t.content}).then(function(t){e.ea.publish(new n.CurrentUser(e.currentUser))})})})},e.prototype.getUser=function(e){var t=this;this.ac.get("/api/users/"+e).then(function(e){t.user=e.content,t.ac.get("/api/followers/"+t.user._id).then(function(e){t.user.followers=e.content}).then(function(e){t.ac.get("/api/following/"+t.user._id).then(function(e){t.user.following=e.content}).then(function(e){t.ea.publish(new n.ActiveUser(t.user))})})})},e.prototype.getUsers=function(){var e=this;this.ac.get("/api/users").then(function(t){var i=t.content;i.forEach(function(t){e.ac.get("/api/followers/"+t._id).then(function(e){t.followers=e.content}),e.ac.get("/api/following/"+t._id).then(function(e){t.following=e.content}),e.users.set(t.email,t)}),e.ea.publish(i)})},e.prototype.getUsersTweets=function(e){var t=this,i=0;this.ea.publish(new n.Tweets([])),this.ac.get("/api/users/"+e+"/tweets").then(function(e){t.tweets=e.content,t.tweets.forEach(function(e){e.readableDate=s(e.date).format("lll"),++i==t.tweets.length&&(t.ea.publish(new n.Tweets(t.tweets)),console.log(t.tweets))})})},e.prototype.getTweets=function(){var e=this;this.ac.get("/api/tweets").then(function(t){e.tweets=t.content,e.tweets.forEach(function(e){e.readableDate=s(e.date).format("lll")}),e.ea.publish(new n.Tweets(e.tweets))})},e.prototype.getFollowedTweets=function(){var e=this;this.ac.get("/api/tweets/followed").then(function(t){e.tweets=t.content,e.tweets.forEach(function(e){e.readableDate=s(e.date).format("lll")}),console.log(e.tweets),e.ea.publish(new n.Tweets(e.tweets))})},e.prototype.tweet=function(e,t){var i=this,r={tweet:e,image:t};this.ac.post("/api/tweets",r).then(function(e){var t=e.content;t.readableDate=s(t.date).format("lll"),i.tweets.unshift(t)})},e.prototype.deleteTweet=function(e){var t=this;this.ac.delete("/api/tweets/"+e).then(function(e){t.getUsersTweets(t.currentUser._id)})},e.prototype.follow=function(e){var t=this,i={followee:e._id};this.ac.post("/api/follow",i).then(function(i){t.getUser(e._id)})},e.prototype.unfollow=function(e){var t=this;this.ac.delete("/api/follow/"+e._id).then(function(i){t.getUser(e._id)})},e.prototype.register=function(e,t,i,r){var o={firstName:e,lastName:t,email:i,password:r};this.ac.post("/api/users",o).then(function(e){})},e.prototype.update=function(e){var t=this;this.ac.put("/api/users",e).then(function(e){t.getUsers()})},e.prototype.login=function(e,t){var i={email:e,password:t};this.ac.authenticate("/api/users/authenticate",i)},e.prototype.logout=function(){this.ac.clearAuthentication(),this.ea.publish(new n.LoginStatus(!1))},e=__decorate([i.inject(o.default,a.EventAggregator,r.default),__metadata("design:paramtypes",[o.default,a.EventAggregator,r.default])],e)}();t.TweetService=c}),define("text!app.html",["module"],function(e){e.exports='<template><require from="components/nav-bar.html"></require><div class="ui container page-host"><nav-bar router.bind="router"></nav-bar><router-view></router-view></div></template>'}),define("text!home.html",["module"],function(e){e.exports='<template><require from="components/nav-bar.html"></require><div class="ui container page-host"><nav-bar router.bind="router"></nav-bar><router-view></router-view></div></template>'}),define("text!components/deletabletimeline.html",["module"],function(e){e.exports='<template><form submit.trigger="deleteSelected()" method="POST"><table class="ui padded celled table"><thead><tr><th><i class="twitter icon"></i>Tweet</th><th><i class="trash icon"></i></th></tr></thead><tbody><tr repeat.for="tweet of tweets"><td><div class="item"><img class="ui ${tweet.img ? \'fluid\' : \'hidden\'} hidden tiny left floated image" src="${tweet.img}"><div class="content"><a class="header" href="#/profile">${tweet.tweeter.firstName} ${tweet.tweeter.lastName}</a><div class="description">${tweet.tweet}</div></div></div></td><td><div class="ui checkbox"><input type="checkbox" value.bind="tweet._id" checked.bind="checkboxes"><label id="${tweet._id}"></label></div></td></tr></tbody><tfoot class="full-width"><tr><th colspan="2"><button class="ui right floated small red labeled icon button"><i class="trash icon"></i> Delete Selected</button> <a class="ui tiny red labeled icon button" click.delegate="deleteAll()"><i class="trash icon"></i> Delete All</a></th></tr></tfoot></table></form></template>'}),define("text!components/followedtweets.html",["module"],function(e){e.exports='<template><div class="ui grid segment"><div class="ui form six wide column"><compose view-model="./viewusers"></compose></div><aside class="ten wide column"><compose view-model="./timeline"></compose></aside></div></template>'}),define("text!components/home.html",["module"],function(e){e.exports='<template><div class="ui grid segment"><div class="ui form six wide column"><compose view-model="./tweet"></compose></div><aside class="ten wide column"><compose view-model="./timeline"></compose></aside></div></template>'}),define("text!components/login.html",["module"],function(e){e.exports='<template><form submit.delegate="login($event)" class="ui stacked segment form"><h3 class="ui header">Log-in</h3><div class="field"><label>Email</label><input placeholder="Email" value.bind="email" required></div><div class="field"><label>Password</label><input placeholder="Password" type="password" value.bind="password" required></div><button class="ui blue submit button">Login</button><h3>${prompt}</h3></form></template>'}),define("text!components/logout.html",["module"],function(e){e.exports='<template><form submit.delegate="logout($event)" class="ui stacked segment form"><h3 class="ui header">Are you sure you want to log out?</h3><button class="ui blue submit button">Logout</button></form></template>'}),define("text!components/nav-bar.html",["module"],function(e){e.exports='<template bindable="router"><nav class="ui blue inverted menu"><header class="header item"><a href="/"><i class="twitter icon"></i> Tweeter</a></header><div class="right menu"><a repeat.for="row of router.navigation" class="${row.isActive ? \'active\' : \'\'} item" href.bind="row.href">${row.title}</a></div></nav></template>'}),define("text!components/profile.html",["module"],function(e){e.exports='<template><div class="ui grid segment"><div class="ui form six wide column"><compose view-model="./tweet"></compose></div><aside class="ten wide column"><compose view-model="./deletabletimeline"></compose></aside></div></template>'}),define("text!components/settings.html",["module"],function(e){e.exports='<template><form submit.delegate="update($event)" class="ui stacked segment form"><h3 class="ui header">Settings</h3><div class="two fields"><div class="field"><label>First Name</label><input placeholder="First Name" type="text" value.bind="firstName" required></div><div class="field"><label>Last Name</label><input placeholder="Last Name" type="text" value.bind="lastName" required></div></div><div class="field"><label>Email</label><input placeholder="Email" type="text" value.bind="email" required></div><div class="field"><label>Password</label><input placeholder="Password" type="password" value.bind="password" required></div><button class="ui blue submit button">Submit</button></form></template>'}),define("text!components/signup.html",["module"],function(e){e.exports='<template><form submit.delegate="register($event)" class="ui stacked segment form"><h3 class="ui header">Register</h3><div class="two fields"><div class="field"><label>First Name</label><input placeholder="First Name" type="text" value.bind="firstName" required></div><div class="field"><label>Last Name</label><input placeholder="Last Name" type="text" value.bind="lastName" required></div></div><div class="field"><label>Email</label><input placeholder="Email" type="text" value.bind="email" required></div><div class="field"><label>Password</label><input placeholder="Password" type="password" value.bind="password" required></div><button class="ui blue submit button">Submit</button></form></template>'}),define("text!components/timeline.html",["module"],function(e){e.exports='<template><div repeat.for="tweet of tweets" class="ui blue fluid card"><div><img class="ui ${tweet.img ? \'fluid\' : \'hidden\'} image" src="${tweet.img}"></div><div class="content"> ${tweet.tweet} </div><div class="extra content"><a route-href="route: userprofile; params.bind: { id: tweet.tweeter._id }"> ${tweet.tweeter.firstName} ${tweet.tweeter.lastName} </a><div class="right floated meta">${tweet.readableDate}</div></div></div></template>'}),define("text!components/tweet.html",["module"],function(e){e.exports='<template><div class="ui form six wide column"><form submit.trigger="makeTweet()" class="ui blue form segment"><div class="grouped inline fields"><div class="text"><h3>Tweet</h3></div><div class="field"><div class="ui fluid input"><input type="text" placeholder="What\'s happening?" maxlength="140" value.bind="tweet" required></div></div></div><div class="field"><input type="file" accept="image/*" files.bind="image"></div><button class="ui right aligned blue submit button">Tweet</button></form></div></template>'}),define("text!components/userprofile.html",["module"],function(e){e.exports='<template><div class="ui grid segment"><div class="ui form six wide column"><compose view-model="./viewuser"></compose></div><aside class="ten wide column"><compose view-model="./timeline"></compose></aside></div></template>'}),define("text!components/viewuser.html",["module"],function(e){e.exports='<template><div class="ui segment"><div class="title"><a class="ui small right floated ${isFollowing ? \'red\' : \'blue\' } labeled icon button" click.delegate="followToggle()"><i class="${isFollowing ? \'minus\' : \'plus\' } icon"></i> ${isFollowing ? \'Unf\' : \'F\' }ollow</a><h1>${user.firstName} ${user.lastName}</h1></div><div class="ui divider"></div><div id="acc" class="ui accordion"><div class="title"><i class="dropdown icon"></i> ${user.followers.length} Followers</div><div class="content"><div repeat.for="user of user.followers"><a route-href="route: userprofile; params.bind: { id: user._id }">${user.firstName} ${user.lastName}</a></div></div><div class="ui divider"></div><div class="title"><i class="dropdown icon"></i> ${user.following.length} Following</div><div class="content"><div repeat.for="user of user.following"><a route-href="route: userprofile; params.bind: { id: user._id }">${user.firstName} ${user.lastName}</a></div></div></div></div></template>'}),define("text!components/viewusers.html",["module"],function(e){e.exports='<template><div class="ui padded divided list segment"><div repeat.for="[id, user] of users" class="padded item"><div class="content"><a route-href="route: userprofile; params.bind: { id: user._id }">${user.firstName} ${user.lastName}</a></div></div></div></template>'});